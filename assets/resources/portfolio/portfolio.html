<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>KaiYu He • Portfolio</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
:root{
  --bg:#0f1418;
  --panel:#182026;
  --panel-alt:#1e272e;
  --border:#2d3942;
  --border-soft:#223038;
  --text:#e6eef2;
  --text-dim:#80919c;
  --accent:#11b991;
  --accent-alt:#159fdc;
  --radius:10px;
  --radius-full:999px;
  --space:60px;
  --code:#142028;
}
*{box-sizing:border-box;margin:0;padding:0;font:inherit;}
html,body{
  font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
  background:#0f1418;
  color:var(--text);
  line-height:1.5;
  -webkit-font-smoothing:antialiased;
}
body{padding:48px 18px 120px;}
a{color:var(--accent-alt);text-decoration:none;}
a:focus,button:focus{outline:2px solid var(--accent-alt);outline-offset:2px;}
img{display:block;max-width:100%;height:auto;}
.container{
  max-width:960px;
  margin:0 auto;
  display:flex;
  flex-direction:column;
  gap:var(--space);
}
.section{display:flex;flex-direction:column;gap:24px;}
.simple-panel{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:32px clamp(18px,4vw,40px);
}

/* Enhanced section styles */
.portfolio-section{
  background:linear-gradient(135deg, rgba(24,32,38,0.4), rgba(30,39,46,0.2));
  backdrop-filter:blur(10px);
  border:1px solid var(--border);
  border-radius:16px;
  padding:48px 32px;
  position:relative;
  overflow:hidden;
}
.portfolio-section::before{
  content:'';
  position:absolute;
  top:0;
  left:0;
  right:0;
  height:1px;
  background:linear-gradient(90deg, transparent, var(--accent-alt), transparent);
  opacity:0.3;
}

h1{font-size:clamp(1.9rem,5vw,2.9rem);font-weight:700;line-height:1.1;letter-spacing:-.5px;}
h2{font-size:clamp(1.3rem,3.2vw,1.9rem);font-weight:600;letter-spacing:-.3px;}
h3{font-size:1.05rem;font-weight:600;}
p{font-size:.95rem;max-width:70ch;}
.muted{color:var(--text-dim);font-size:.82rem;}
.inline-accent{color:var(--accent-alt);font-weight:600;}
.row{display:flex;flex-wrap:wrap;gap:14px;}
.btn{
  background:var(--accent);
  color:#fff;
  font-size:.85rem;
  font-weight:600;
  letter-spacing:.4px;
  padding:10px 18px;
  border:1px solid var(--accent);
  border-radius:var(--radius-full);
  text-decoration:none;
  line-height:1;
  cursor:pointer;
}
.btn.alt{background:var(--panel-alt);border-color:var(--border);color:var(--text);}
.avatar-box{
  width:200px;
  aspect-ratio:1/1;
  border:1px solid var(--border);
  border-radius:16px;
  overflow:hidden;
  background:#111a20;
}
.grid{
  display:grid;
  gap:18px;
  grid-template-columns:repeat(auto-fill,minmax(210px,1fr));
}
.card{
  background:var(--panel-alt);
  border:1px solid var(--border-soft);
  border-radius:var(--radius);
  padding:14px 14px 18px;
  display:flex;
  flex-direction:column;
  gap:10px;
  min-height:230px;
  transition:transform 0.2s ease, box-shadow 0.2s ease;
}
.card:hover{
  transform:translateY(-2px);
  box-shadow:0 8px 32px rgba(17,185,145,0.1);
}
.card-image-container{
  position:relative;
  border-radius:8px;
  border:1px solid var(--border-soft);
  background:#0a1216;
  aspect-ratio:4/3;
  overflow:hidden;
}
.card img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:none;
}
.card img.active{
  display:block;
}
.progress-bar-container{
  position:absolute;
  bottom:0;
  left:0;
  right:0;
  height:3px;
  background:rgba(255,255,255,0.1);
}
.progress-bar{
  height:100%;
  background:var(--accent);
  width:0;
  transition:none;
}
.badges{display:flex;flex-wrap:wrap;gap:4px;margin-bottom:8px;}
.tag{
  font-size:.55rem;
  letter-spacing:.5px;
  text-transform:uppercase;
  padding:3px 6px;
  border:1px solid var(--border);
  border-radius:5px;
  background:var(--panel);
  color:var(--text-dim);
}
.tag.highlight{
  background:linear-gradient(135deg, var(--accent), var(--accent-alt));
  color:#fff;
  border-color:var(--accent);
  font-weight:600;
  box-shadow:0 2px 8px rgba(17,185,145,0.3);
}
.divider{
  height:1px;
  border:none;
  background:linear-gradient(90deg,transparent,var(--border),transparent);
  margin:4px 0 8px;
}
code{
  font-family:ui-monospace,Menlo,Consolas,monospace;
  background:var(--code);
  padding:2px 5px;
  border-radius:4px;
  font-size:.72rem;
  border:1px solid var(--border-soft);
  color:#7fd9ff;
}
.footer{
  text-align:center;
  font-size:.65rem;
  color:var(--text-dim);
  margin-top:20px;
}
.projects-intro{font-size:.9rem;}
.links-stack a{display:inline-block;}
.res-btns{margin-top:6px;}

/* Enhanced section titles */
.section-title{
  text-align:center;
  margin-bottom:32px;
  position:relative;
}
.section-title h2{
  font-size:clamp(2rem,4vw,2.8rem);
  font-weight:700;
  background:linear-gradient(135deg, var(--text), var(--accent-alt));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  margin-bottom:8px;
}
.section-title::after{
  content:'';
  width:60px;
  height:3px;
  background:linear-gradient(90deg, var(--accent), var(--accent-alt));
  border-radius:2px;
  position:absolute;
  bottom:-8px;
  left:50%;
  transform:translateX(-50%);
}

.section-divider{
  margin:60px 0 40px;
}
/* Responsive */
@media (max-width:720px){
  body{padding:40px 14px 100px;}
  .container{gap:44px;}
  .row.stack{flex-direction:column;align-items:flex-start;}
  .avatar-box{width:160px;}
  h1{font-size:clamp(1.9rem,7vw,2.5rem);}
  .portfolio-section{padding:32px 24px;}
}
</style>
</head>
<body>
  <main class="container">
    <!-- HERO -->
    <section class="section">
      <div class="row stack" style="align-items:flex-start;gap:36px;">
        <div style="flex:1;min-width:260px;display:flex;flex-direction:column;gap:18px;">
          <h1>Crafting Intelligent & Playful Agent Experiences</h1>
          <p>I am a third-year Ph.D. candidate focusing on <span class="inline-accent">AI agents + game systems + cognitive machine learning</span>. I build lightweight interactive worlds where NPCs can learn and adapt.</p>
          <p class="muted">University of Texas at Dallas • ex Columbia (Biostatistics)</p>
          <div class="row res-btns">
            <a class="btn" href="../portfolio/kaiyu_cv.pdf" target="_blank">CV</a>
            <a class="btn alt" href="https://github.com/KaiyuHe998/" target="_blank">GitHub</a>
            <a class="btn alt" href="mailto:kaiyu.he@utdallas.edu">Email</a>
          </div>
        </div>
        <div class="avatar-box">
          <img src="../portfolio/avat.jpg" alt="Profile" loading="lazy" decoding="async" width="400" height="400">
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section class="section simple-panel" id="about">
      <h2>About</h2>
      <p>My path spans statistics, biostatistics, and CS. I explore how <strong>agent reasoning</strong> and structured perception make AI agents learn and adapt like humans.</p>
      <p class="muted">Areas: Agents • Game AI • Knowledge Extraction</p>
      <div class="row">
        <a class="btn alt" href="#projects">Projects</a>
        <a class="btn alt" href="#publications">Publications</a>
      </div>
    </section>

    <!-- PUBLICATIONS -->
    <section class="section portfolio-section" id="publications">
      <div class="section-title">
        <h2>Publications</h2>
      </div>
      <div class="grid" id="publications-grid">
        <!-- Dynamic content will be loaded here -->
      </div>
    </section>

    <!-- PROJECTS -->
    <section class="section portfolio-section" id="projects">
      <div class="section-title">
        <h2>Projects</h2>
      </div>
      <p class="projects-intro muted" style="text-align:center;margin-bottom:24px;">Interactive preview with image rotation. GIFs are lazy‑loaded to reduce initial cost.</p>
      <div class="grid" id="projects-grid">
        <!-- Dynamic content will be loaded here -->
      </div>
      <div style="margin-top:24px;text-align:center;">
        <a class="btn alt" href="https://meanstudent.shinyapps.io/new_shiny/" target="_blank">Data Exploration Demo</a>
      </div>
    </section>

    <!-- CONTACT -->
    <section class="section simple-panel" id="contact">
      <h2>Contact</h2>
      <div class="grid" style="--min:240px;">
        <div class="card" style="min-height:auto;">
          <h3>Academic</h3>
          <p><strong>University of Texas at Dallas</strong><br>CS Department<br><a href="mailto:kaiyu.he@utdallas.edu">kaiyu.he@utdallas.edu</a></p>
        </div>
        <div class="card" style="min-height:auto;">
          <h3>Previous</h3>
          <p><strong>Columbia University</strong><br>Mailman School of Public Health<br>Biostatistics</p>
        </div>
        <div class="card" style="min-height:auto;">
          <h3>Links</h3>
          <p class="links-stack">
            <a href="../portfolio/kaiyu_cv.pdf" target="_blank">CV</a><br>
            <a href="https://github.com/KaiyuHe998/" target="_blank">GitHub</a><br>
            <a href="mailto:kh3074@cumc.columbia.edu">Alt Email</a>
            <a href="https://scholar.google.com/citations?hl=en&user=afzTrgEAAAAJ">Google Scholar</a>
          </p>
        </div>
      </div>
      <div class="footer">© 2025 KaiYu He</div>
    </section>
  </main>

  <script>
    // Image carousel functionality with random delays
    class ImageCarousel {
      constructor(container, images, baseDuration = 4000) {
        this.container = container;
        this.images = images;
        this.baseDuration = baseDuration;
        // Add random offset (±1000ms) to avoid synchronization
        this.duration = baseDuration + (Math.random() - 0.5) * 2000;
        this.currentIndex = 0;
        this.timer = null;
        this.progressBar = null;
        this.init();
      }

      init() {
        if (this.images.length <= 1) return;

        // Create progress bar
        const progressContainer = document.createElement('div');
        progressContainer.className = 'progress-bar-container';
        this.progressBar = document.createElement('div');
        this.progressBar.className = 'progress-bar';
        progressContainer.appendChild(this.progressBar);
        this.container.appendChild(progressContainer);

        // Add random initial delay to further desync
        setTimeout(() => {
          this.start();
        }, Math.random() * 1000);
      }

      start() {
        if (this.images.length <= 1) return;
        
        this.updateProgress();
        this.timer = setInterval(() => {
          this.next();
        }, this.duration);
      }

      next() {
        const currentImg = this.images[this.currentIndex];
        currentImg.classList.remove('active');
        
        this.currentIndex = (this.currentIndex + 1) % this.images.length;
        
        const nextImg = this.images[this.currentIndex];
        nextImg.classList.add('active');
        
        this.updateProgress();
      }

      updateProgress() {
        if (!this.progressBar) return;
        
        this.progressBar.style.width = '0%';
        this.progressBar.style.transition = 'none';
        
        setTimeout(() => {
          this.progressBar.style.transition = `width ${this.duration}ms linear`;
          this.progressBar.style.width = '100%';
        }, 50);
      }

      destroy() {
        if (this.timer) {
          clearInterval(this.timer);
        }
      }
    }

    // Create project card
    function createProjectCard(project) {
      const card = document.createElement('div');
      card.className = 'card';

      // Highlighted markers first
      if (project.portfolio_marker_highlight && project.portfolio_marker_highlight.length > 0) {
        const highlightBadges = document.createElement('div');
        highlightBadges.className = 'badges';
        
        project.portfolio_marker_highlight.forEach(marker => {
          const tag = document.createElement('span');
          tag.className = 'tag highlight';
          tag.textContent = marker;
          highlightBadges.appendChild(tag);
        });
        
        card.appendChild(highlightBadges);
      }

      // Image container
      const imageContainer = document.createElement('div');
      imageContainer.className = 'card-image-container';

      // Create images
      const images = project.portfolio_src.map((src, index) => {
        const img = document.createElement('img');
        img.src = src;
        img.alt = project.title;
        img.loading = 'lazy';
        img.decoding = 'async';
        if (index === 0) img.classList.add('active');
        imageContainer.appendChild(img);
        return img;
      });

      card.appendChild(imageContainer);

      // Title
      const title = document.createElement('h3');
      title.textContent = project.title;
      card.appendChild(title);

      // Regular markers
      if (project.portfolio_marker && project.portfolio_marker.length > 0) {
        const badges = document.createElement('div');
        badges.className = 'badges';

        project.portfolio_marker.forEach(marker => {
          const tag = document.createElement('span');
          tag.className = 'tag';
          tag.textContent = marker;
          badges.appendChild(tag);
        });

        card.appendChild(badges);
      }

      // Description (optional)
      if (project.description) {
        const desc = document.createElement('p');
        desc.className = 'muted';
        desc.textContent = project.description;
        card.appendChild(desc);
      }

      // Initialize carousel if multiple images
      if (images.length > 1) {
        new ImageCarousel(imageContainer, images);
      }

      return card;
    }

    // Load and render projects
    async function loadProjects() {
      try {
        const response = await fetch('./construct_meta.json');
        const data = await response.json();

        // Render publications
        const publicationsGrid = document.getElementById('publications-grid');
        data.publications.forEach(publication => {
          const card = createProjectCard(publication);
          publicationsGrid.appendChild(card);
        });

        // Render projects
        const projectsGrid = document.getElementById('projects-grid');
        data.projects.forEach(project => {
          const card = createProjectCard(project);
          projectsGrid.appendChild(card);
        });

      } catch (error) {
        console.error('Failed to load projects:', error);
      }
    }

    // Initialize when DOM is loaded
    document.addEventListener('DOMContentLoaded', loadProjects);
  </script>
</body>
</html>
